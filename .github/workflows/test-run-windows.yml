name: test-run windows

on: [pull_request]

jobs:
  build:
    runs-on: windows-latest

    steps:
      - uses: actions/checkout@v2

      - name: 7z check
        shell: cmd
        run: |
          call _7z\create_install_for.bat

      - name: Internal test-run
        shell: cmd
        run: call .tests\test-run.bat _ create

      - name: Internal test-run mingw64
        shell: cmd
        run: call .tests\test-run.mingw64.bat _ create

      - name: External test-run
        shell: cmd
        run: call .tests\test-run.bat ! _ create
